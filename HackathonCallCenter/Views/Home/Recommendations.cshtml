@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <link rel="stylesheet" href="~/css/dashboard.css">
    <link rel="stylesheet" href="~/css/charts.css">
}

<div class="main-content">
    <div class="header">
        <div class="header-title">
            <h1>Рекомендации AI</h1>
            <p>Интеллектуальные рекомендации для улучшения работы</p>
        </div>
        <div class="header-actions">
            <button class="btn btn-secondary">
                <i class="fas fa-history"></i>
                История рекомендаций
            </button>
            <button class="btn btn-primary">
                <i class="fas fa-sync"></i>
                Обновить рекомендации
            </button>
            <div class="user-info">
                <div class="user-avatar">АИ</div>
                <div>
                    <div style="font-weight: 600;">Амридин Назаров</div>
                    <div style="font-size: 0.8rem; color: var(--gray-color);">Администратор</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Статистика рекомендаций -->
    <div class="stats-container">
        <div class="stat-card">
            <div class="stat-icon" style="background-color: #dbeafe; color: var(--primary-color);">
                <i class="fas fa-lightbulb"></i>
            </div>
            <div class="stat-info">
                <h3>127</h3>
                <p>Всего рекомендаций</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background-color: #d1fae5; color: var(--success-color);">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
                <h3>68%</h3>
                <p>Принятых рекомендаций</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background-color: #fef3c7; color: var(--warning-color);">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="stat-info">
                <h3>+23%</h3>
                <p>Рост эффективности</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background-color: #fce7f3; color: #db2777;">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-info">
                <h3>4.2 дн</h3>
                <p>Среднее время внедрения</p>
            </div>
        </div>
    </div>

    <!-- Приоритетные рекомендации -->
    <div class="card">
        <div class="card-header">
            <div class="card-title">
                <i class="fas fa-star" style="color: var(--warning-color); margin-right: 10px;"></i>
                Приоритетные рекомендации
            </div>
            <div class="card-actions">
                <span class="badge badge-warning">Высокий приоритет</span>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem;">
            <!-- Рекомендация 1 -->
            <div class="ai-card" style="border-left: 4px solid var(--danger-color);">
                <div class="ai-title">
                    <i class="fas fa-exclamation-triangle" style="color: var(--danger-color);"></i>
                    Оптимизация скриптов продаж
                </div>
                <div class="ai-list">
                    <div class="ai-item">
                        <div class="ai-item-label">Проблема:</div>
                        <div class="ai-item-value" style="color: var(--danger-color);">Низкая конверсия в утренние часы</div>
                    </div>
                    <div class="ai-item">
                        <div class="ai-item-label">Влияние:</div>
                        <div class="ai-item-value">-15% к конверсии в 9:00-11:00</div>
                    </div>
                    <div class="ai-item">
                        <div class="ai-item-label">Рекомендация:</div>
                        <div class="ai-item-value">Изменить приветствие и первые вопросы для утренних звонков</div>
                    </div>
                    <div class="ai-item">
                        <div class="ai-item-label">Ожидаемый эффект:</div>
                        <div class="ai-item-value" style="color: var(--success-color);">+12% к конверсии</div>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 1rem;">
                    <button class="btn btn-success" style="padding: 0.4rem 0.8rem; font-size: 0.9rem;">
                        <i class="fas fa-check"></i> Принять
                    </button>
                    <button class="btn btn-secondary" style="padding: 0.4rem 0.8rem; font-size: 0.9rem;">
                        <i class="fas fa-times"></i> Отклонить
                    </button>
                    <button class="btn btn-primary" style="padding: 0.4rem 0.8rem; font-size: 0.9rem;">
                        <i class="fas fa-clock"></i> Отложить
                    </button>
                </div>
            </div>

            <!-- Рекомендация 2 -->
            <div class="ai-card" style="border-left: 4px solid var(--warning-color);">
                <div class="ai-title">
                    <i class="fas fa-user-friends" style="color: var(--warning-color);"></i>
                    Обучение операторов
                </div>
                <div class="ai-list">
                    <div class="ai-item">
                        <div class="ai-item-label">Проблема:</div>
                        <div class="ai-item-value" style="color: var(--warning-color);">Низкие навыки работы с возражениями</div>
                    </div>
                    <div class="ai-item">
                        <div class="ai-item-label">Влияние:</div>
                        <div class="ai-item-value">38% потерянных сделок из-за возражений</div>
                    </div>
                    <div class="ai-item">
                        <div class="ai-item-label">Рекомендация:</div>
                        <div class="ai-item-value">Провести тренинг по техникам работы с возражениями</div>
                    </div>
                    <div class="ai-item">
                        <div class="ai-item-label">Ожидаемый эффект:</div>
                        <div class="ai-item-value" style="color: var(--success-color);">+25% к успешным сделкам</div>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 1rem;">
                    <button class="btn btn-success" style="padding: 0.4rem 0.8rem; font-size: 0.9rem;">
                        <i class="fas fa-check"></i> Принять
                    </button>
                    <button class="btn btn-secondary" style="padding: 0.4rem 0.8rem; font-size: 0.9rem;">
                        <i class="fas fa-times"></i> Отклонить
                    </button>
                    <button class="btn btn-primary" style="padding: 0.4rem 0.8rem; font-size: 0.9rem;">
                        <i class="fas fa-clock"></i> Отложить
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Все рекомендации -->
    <div class="card">
        <div class="card-header">
            <div class="card-title">Все рекомендации</div>
            <div class="card-actions">
                <select class="form-control" style="width: 200px;">
                    <option value="">Все категории</option>
                    <option value="sales">Продажи</option>
                    <option value="service">Обслуживание</option>
                    <option value="technical">Технические</option>
                    <option value="training">Обучение</option>
                </select>
            </div>
        </div>

        <div style="display: flex; flex-direction: column; gap: 1rem;">
            <!-- Рекомендация 1 -->
            <div class="recommendation-item" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background-color: #f8fafc; border-radius: 8px; border-left: 4px solid var(--success-color);">
                <div style="flex: 1;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 0.5rem;">
                        <div class="badge badge-success">Принята</div>
                        <div style="font-weight: 600;">Оптимизация времени звонков</div>
                    </div>
                    <div style="color: var(--gray-color); font-size: 0.9rem; margin-bottom: 0.5rem;">
                        Перенос исходящих звонков на 14:00-17:00 увеличивает конверсию на 18%
                    </div>
                    <div style="font-size: 0.8rem; color: var(--gray-color);">
                        <i class="fas fa-calendar"></i> Внедрено 15.03.2023 • <i class="fas fa-chart-line"></i> Результат: +15%
                    </div>
                </div>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn-icon" title="Подробнее">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    <button class="btn-icon" title="Поделиться">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>

            <!-- Рекомендация 2 -->
            <div class="recommendation-item" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background-color: #f8fafc; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                <div style="flex: 1;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 0.5rem;">
                        <div class="badge badge-primary">В процессе</div>
                        <div style="font-weight: 600;">Внедрение шаблонов ответов</div>
                    </div>
                    <div style="color: var(--gray-color); font-size: 0.9rem; margin-bottom: 0.5rem;">
                        Создание библиотеки шаблонных ответов на частые вопросы сократит время звонка на 23%
                    </div>
                    <div style="font-size: 0.8rem; color: var(--gray-color);">
                        <i class="fas fa-calendar"></i> Начало: 20.03.2023 • <i class="fas fa-user"></i> Ответственный: Анна
                    </div>
                </div>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn-icon" title="Подробнее">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    <button class="btn-icon" title="Поделиться">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>

            <!-- Рекомендация 3 -->
            <div class="recommendation-item" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background-color: #f8fafc; border-radius: 8px; border-left: 4px solid var(--warning-color);">
                <div style="flex: 1;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 0.5rem;">
                        <div class="badge badge-warning">На рассмотрении</div>
                        <div style="font-weight: 600;">Анализ тона голоса</div>
                    </div>
                    <div style="color: var(--gray-color); font-size: 0.9rem; margin-bottom: 0.5rem;">
                        Корректировка тона голоса операторов в первые 30 секунд разговора повышает доверие клиентов
                    </div>
                    <div style="font-size: 0.8rem; color: var(--gray-color);">
                        <i class="fas fa-calendar"></i> Предложено 10.03.2023 • <i class="fas fa-robot"></i> AI-анализ
                    </div>
                </div>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn-icon" title="Подробнее">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    <button class="btn-icon" title="Поделиться">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>

            <!-- Рекомендация 4 -->
            <div class="recommendation-item" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background-color: #f8fafc; border-radius: 8px; border-left: 4px solid var(--danger-color);">
                <div style="flex: 1;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 0.5rem;">
                        <div class="badge badge-danger">Отклонена</div>
                        <div style="font-weight: 600;">Изменение структуры отдела</div>
                    </div>
                    <div style="color: var(--gray-color); font-size: 0.9rem; margin-bottom: 0.5rem;">
                        Создание отдельной команды для работы с VIP-клиентами увеличит удержание на 8%
                    </div>
                    <div style="font-size: 0.8rem; color: var(--gray-color);">
                        <i class="fas fa-calendar"></i> Отклонено 05.03.2023 • <i class="fas fa-times-circle"></i> Причина: бюджет
                    </div>
                </div>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn-icon" title="Подробнее">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    <button class="btn-icon" title="Поделиться">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- График эффективности рекомендаций -->
    <div class="card">
        <div class="card-header">
            <div class="card-title">Эффективность внедренных рекомендаций</div>
        </div>
        <div class="chart-container">
            <canvas id="recommendationsChart"></canvas>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/js/recommendations.js"></script>
}